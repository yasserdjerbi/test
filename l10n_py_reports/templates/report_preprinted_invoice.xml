<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- template de factura preimpresa -->

    <template id="py_preprinted_invoice">
        <t t-set="o" t-value="o.with_context(lang=lang)"/>
        <t t-if="not company">
            <!-- Multicompany -->
            <t t-if="company_id">
                <t t-set="company" t-value="company_id"/>
            </t>
            <t t-elif="o and 'company_id' in o">
                <t t-set="company" t-value="o.company_id.sudo()"/>
            </t>
            <t t-else="else">
                <t t-set="company" t-value="res_company"/>
            </t>
        </t>
        <t t-esc="company.update_scss()"/>
<!--
        <style type="text/css">
            div {
                border:1px solid black
            }
        </style>
-->
        <div style="height:100%;">

            <!-- Encabezado nro de factura, ruc, etc -->
            <div style="height:13%;">
                <span style="position: relative; top:64%; left:52%;
                    font-size: 10px" t-esc="o.document_number"/>
            </div>

            <!-- datos del cliente y de la factura -->
            <div style="height:12.5%; font-size:12px;">
                <table style="width:100%">
                    <colgroup>
                        <col style="width:65.78%;"/>
                        <col style="width:34.21%;"/>
                    </colgroup>
                    <tr>
                        <td>
                            <span style="position: relative; left:23%;" t-esc="o.invoice_date"
                                  t-options='{"widget": "date"}'/>
                        </td>
                        <td>
                            <t t-if="o.payment_cash">
                                <span style="position: relative; left:20%;"><strong>X</strong></span>
                            </t>
                            <t t-if="o.payment_credit">
                                <span style="position: relative; left:45%;"><strong>X</strong></span>
                            </t>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <span style="position: relative; left:30%;" t-esc="o.partner_id.name"/>
                        </td>
                        <td>
                            <span style="position: relative; left:40%; " t-field="o.partner_id.ruc"/>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <span style="position: relative; left:14%;" t-esc="o.partner_id.street"/>
                        </td>
                        <td>
                            <span style="position: relative; left:48%;" t-field="o.invoice_payment_term_id.name"/>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <span style="position: relative; left:18%;" t-esc="o.narration"/>
                        </td>
                        <td>
                            <span style="position: relative; left:57%;" t-field="o.remision"/>
                        </td>
                    </tr>
                </table>
            </div>

            <!-- encabezados de las lineas de factura -->
            <div style="height:5.9%"/>

            <!-- lineas de factura -->
            <div style="height:49%; font-size:12px;">
                <table style="width:100%">
                    <colgroup>
                        <col style="width:06.67%;"/>
                        <col style="width:11.03%;"/>
                        <col style="width:50.80%;"/>
                        <col style="width:07.72%;"/>
                        <col style="width:14.95%;"/>
                        <col style="width:08.83%;"/>
                    </colgroup>
                    <t t-foreach="o.invoice_line_ids" t-as="line">
                        <tr>
                            <td class="text-center">
                                <span t-field="line.quantity"/>
                                <span t-field="line.product_uom_id"
                                      groups="uom.group_uom"/>
                            </td>
                            <td>
                                <span t-field="line.product_id.barcode"/>
                            </td>
                            <td>
                                <span t-field="line.product_id.display_name"/>
                            </td>
                            <td align="right">
                                <span t-field="line.price_unit" t-options='{"widget": "monetary"}'/>
                            </td>
                            <td align="right">
                                <span t-field="line.tax_free"  t-options='{"widget": "monetary"}'/>
                            </td>
                            <td align="right">
                                <span t-field="line.tax_10"  t-options='{"widget": "monetary"}'/>
                            </td>
                        </tr>
                    </t>
                </table>
            </div>

            <!-- Subtotales y totales -->
            <div style="height:13.5%; font-size:12px;">
                <span style="position: relative; left:85%;" t-field="o.amount_tax_free_py" t-options='{"widget": "monetary"}'/>
                <span style="position: relative; left:91%;" t-field="o.amount_tax_10_py" t-options='{"widget": "monetary"}'/>
                <br/>
                <table style="width:100%">
                    <colgroup>
                        <col style="width:90%;"/>
                        <col style="width:10%;"/>
                    </colgroup>
                    <tr>
                        <td>
                            <span style="position: relative; left:13%;" t-field="o.amount_total_in_words"/>
                        </td>
                        <td align="right">
                            <span style="position: relative; left:5%;" t-field="o.amount_total_py" t-options='{"widget": "monetary"}'/>
                        </td>
                    </tr>
                </table>
                <br/>
                <span style="position: relative; left:17%; text-align: right;" t-field="o.tax_10" t-options='{"widget": "monetary"}'/>
                <span style="position: relative; left:54%; text-align: right;" t-field="o.tax_10" t-options='{"widget": "monetary"}'/>
            </div>
        </div>
    </template>
</odoo>
